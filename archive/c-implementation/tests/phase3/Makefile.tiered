# Makefile.tiered - Tiered JIT Compilation Test
#
# Purpose: Build and run tiered JIT optimization test (Phase 3.4)

CXX = clang++-18
LLVM_CONFIG = llvm-config-18

CXXFLAGS = -O2 $(shell $(LLVM_CONFIG) --cxxflags)
LDFLAGS = $(shell $(LLVM_CONFIG) --ldflags)
LIBS = -lLLVM-18

.PHONY: all clean run

all: test_tiered_jit

test_tiered_jit: test_tiered_jit.cpp
	@echo "=== Building Tiered JIT test ==="
	$(CXX) $(CXXFLAGS) $< $(LDFLAGS) $(LIBS) -o $@
	@echo ""
	@echo "âœ“ Build complete"
	@ls -lh $@

run: test_tiered_jit
	@echo "=== Running Tiered JIT test (Phase 3.4) ==="
	@echo ""
	./test_tiered_jit

clean:
	rm -f test_tiered_jit

.PHONY: all clean run
